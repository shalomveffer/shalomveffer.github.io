!function(){var e,t,o;!function(n){function r(e,t){return k.call(e,t)}function i(e,t){var o,n,r,i,a,s,c,l,d,u,f,p,h=t&&t.split("/"),m=y.map,g=m&&m["*"]||{};if(e){for(e=e.split("/"),a=e.length-1,y.nodeIdCompat&&C.test(e[a])&&(e[a]=e[a].replace(C,"")),"."===e[0].charAt(0)&&h&&(p=h.slice(0,h.length-1),e=p.concat(e)),d=0;d<e.length;d++)if("."===(f=e[d]))e.splice(d,1),d-=1;else if(".."===f){if(0===d||1===d&&".."===e[2]||".."===e[d-1])continue;d>0&&(e.splice(d-1,2),d-=2)}e=e.join("/")}if((h||g)&&m){for(o=e.split("/"),d=o.length;d>0;d-=1){if(n=o.slice(0,d).join("/"),h)for(u=h.length;u>0;u-=1)if((r=m[h.slice(0,u).join("/")])&&(r=r[n])){i=r,s=d;break}if(i)break;!c&&g&&g[n]&&(c=g[n],l=d)}!i&&c&&(i=c,s=l),i&&(o.splice(0,s,i),e=o.join("/"))}return e}function a(e,t){return function(){var o=x.call(arguments,0);return"string"!=typeof o[0]&&1===o.length&&o.push(null),h.apply(n,o.concat([e,t]))}}function s(e){return function(t){return i(t,e)}}function c(e){return function(t){b[e]=t}}function l(e){if(r(w,e)){var t=w[e];delete w[e],v[e]=!0,p.apply(n,t)}if(!r(b,e)&&!r(v,e))throw new Error("No "+e);return b[e]}function d(e){var t,o=e?e.indexOf("!"):-1;return o>-1&&(t=e.substring(0,o),e=e.substring(o+1,e.length)),[t,e]}function u(e){return e?d(e):[]}function f(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,h,m,g,b={},w={},y={},v={},k=Object.prototype.hasOwnProperty,x=[].slice,C=/\.js$/;m=function(e,t){var o,n=d(e),r=n[0],a=t[1];return e=n[1],r&&(r=i(r,a),o=l(r)),r?e=o&&o.normalize?o.normalize(e,s(a)):i(e,a):(e=i(e,a),n=d(e),r=n[0],e=n[1],r&&(o=l(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:o}},g={require:function(e){return a(e)},exports:function(e){var t=b[e];return void 0!==t?t:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:f(e)}}},p=function(e,t,o,i){var s,d,f,p,h,y,k,x=[],C=typeof o;if(i=i||e,y=u(i),"undefined"===C||"function"===C){for(t=!t.length&&o.length?["require","exports","module"]:t,h=0;h<t.length;h+=1)if(p=m(t[h],y),"require"===(d=p.f))x[h]=g.require(e);else if("exports"===d)x[h]=g.exports(e),k=!0;else if("module"===d)s=x[h]=g.module(e);else if(r(b,d)||r(w,d)||r(v,d))x[h]=l(d);else{if(!p.p)throw new Error(e+" missing "+d);p.p.load(p.n,a(i,!0),c(d),{}),x[h]=b[d]}f=o?o.apply(b[e],x):void 0,e&&(s&&s.exports!==n&&s.exports!==b[e]?b[e]=s.exports:f===n&&k||(b[e]=f))}else e&&(b[e]=o)},e=t=h=function(e,t,o,r,i){if("string"==typeof e)return g[e]?g[e](t):l(m(e,u(t)).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!t)return;t.splice?(e=t,t=o,o=null):e=n}return t=t||function(){},"function"==typeof o&&(o=r,r=i),r?p(n,e,t,o):setTimeout(function(){p(n,e,t,o)},4),h},h.config=function(e){return h(e)},e._defined=b,o=function(e,t,o){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(o=t,t=[]),r(b,e)||r(w,e)||(w[e]=[e,t,o])},o.amd={jQuery:!0}}(),o("almond",function(){}),function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(){for(var e=0;e<A.length;e++)A[e][0](A[e][1]);A=[],b=!1}function r(e,t){A.push([e,t]),b||(b=!0,C(n,0))}function i(e,t){function o(e){c(t,e)}function n(e){d(t,e)}try{e(o,n)}catch(e){n(e)}}function a(e){var t=e.owner,o=t.state_,n=t.data_,r=e[o],i=e.then;if("function"==typeof r){o=v;try{n=r(n)}catch(e){d(i,e)}}s(i,n)||(o===v&&c(i,n),o===k&&d(i,n))}function s(e,t){var o;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var n=t.then;if("function"==typeof n)return n.call(t,function(n){o||(o=!0,t!==n?c(e,n):l(e,n))},function(t){o||(o=!0,d(e,t))}),!0}}catch(t){return o||d(e,t),!0}return!1}function c(e,t){e!==t&&s(e,t)||l(e,t)}function l(e,t){e.state_===w&&(e.state_=y,e.data_=t,r(f,e))}function d(e,t){e.state_===w&&(e.state_=y,e.data_=t,r(p,e))}function u(e){var t=e.then_;e.then_=void 0;for(var o=0;o<t.length;o++)a(t[o])}function f(e){e.state_=v,u(e)}function p(e){e.state_=k,u(e)}function h(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof h==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],i(e,this)}var m=e.Promise,g=m&&"resolve"in m&&"reject"in m&&"all"in m&&"race"in m&&function(){var e;return new m(function(t){e=t}),"function"==typeof e}();"undefined"!=typeof exports&&exports?(exports.Promise=g?m:h,exports.Polyfill=h):"function"==typeof o&&o.amd?o("promise",[],function(){return g?m:h}):g||(e.Promise=h);var b,w="pending",y="sealed",v="fulfilled",k="rejected",x=function(){},C="undefined"!=typeof setImmediate?setImmediate:setTimeout,A=[];h.prototype={constructor:h,state_:w,then_:null,data_:void 0,then:function(e,t){var o={owner:this,then:new this.constructor(x),fulfilled:e,rejected:t};return this.state_===v||this.state_===k?r(a,o):this.then_.push(o),o.then},catch:function(e){return this.then(null,e)}},h.all=function(e){var o=this;if(!t(e))throw new TypeError("You must pass an array to Promise.all().");return new o(function(t,o){for(var n,r=[],i=0,a=0;a<e.length;a++)n=e[a],n&&"function"==typeof n.then?n.then(function(e){return i++,function(o){r[e]=o,--i||t(r)}}(a),o):r[a]=n;i||t(r)})},h.race=function(e){var o=this;if(!t(e))throw new TypeError("You must pass an array to Promise.race().");return new o(function(t,o){for(var n,r=0;r<e.length;r++)n=e[r],n&&"function"==typeof n.then?n.then(t,o):t(n)})},h.resolve=function(e){var t=this;return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},h.reject=function(e){return new this(function(t,o){o(e)})}}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this),o("profile/console",[],function(){return{trace:0}}),o("common/stringifier",[],function(){function e(e,i){var a,s,c,l,d,u,f;if(e&&i<=r){if(e instanceof Error)return"Error: "+e.message+"\n"+e.stack;if("undefined"!=typeof ErrorEvent&&e instanceof ErrorEvent)return"Error event: "+e.message+" ("+e.filename+": L"+e.lineno+", C"+e.colno+"): "+t(e.error,i+1);if("undefined"!=typeof PromiseRejectionEvent&&e instanceof PromiseRejectionEvent)return"Promise rejected ("+e.type+") because of: "+t(e.reason,i+1);if(e instanceof Event)return"Event "+t(e.type,i+1)+" on target "+t(e.target,i+1);try{return JSON.stringify(e)}catch(r){if(e instanceof Array){for(a=[],s=0,c=Math.min(o,e.length);s<c;++s)a.push(t(e[s],i+1));return e.length>o&&a.push("..."),"["+a.join(", ")+"]"}if(e&&"function"==typeof e.toString&&(e.hasOwnProperty&&e.hasOwnProperty("toString")||Object.getPrototypeOf(e)!==Object.prototype))return e.toString();if("function"==typeof Object.keys&&Object.keys(e).length>0){for(l=Object.keys(e),d=[],u=0,f=Math.min(n,l.length);u<f;++u)d.push(l[u]+": "+t(e[l[u]],i+1));return e+": {"+d.join(", ")+"}"}}}return""+e}var t,o=10,n=10,r=5;return t=function(t,o){switch(typeof t){case"object":return e(t,o);case"undefined":case"number":case"string":case"boolean":case"symbol":case"function":default:return""+t}},{stringify:function(e){try{return t(e,0)}catch(e){return"<exception in toString() and toJSON()>"}}}}),o("common/console",["profile/console","common/stringifier"],function(e,t){function o(t,o){var n=i[t],r=o.join("/")+".js";return function(){var o,i,u;l-c>=d&&delete s[c++],s[l++]={severity:n,timestamp:new Date,source:r,arguments:Array.prototype.slice.call(arguments)},n<=a&&(o=Array.prototype.slice.call(arguments),i=e.locstyle||"color:gray","string"==typeof o[0]?(u=(o[0].match(/%[-.0-9]*[sdifoOc]/g)||[]).length,o[0]+=" %c"+r,o.splice(u+1,0,i)):o.push(r),console[t]?console[t].apply(console,o):console.log.apply(console,o))}}function n(e){var t,n,r;if("string"!=typeof e)throw new Error("Missing or incorrect module name: "+e);if(0===e.length)throw new Error("Empty module name");t={},n=e.split("/");for(r in i)t[r]=o(r,n);return t}function r(e){return t.stringify(e)}var i={error:1,warn:2,info:3,log:4,debug:5,trace:6},a=e.initial||i.warn,s={},c=0,l=0,d=100;return n.history=function(){var e,t=[];for(e=c;e<l;++e)t.push({severity:s[e].severity,epoch:s[e].timestamp.getTime(),file:s[e].source,entries:s[e].arguments.map(r)});return t},e.global&&("undefined"==typeof window||window.comcon||(window.comcon=n)),n}),o("common/timedPromise",["promise","common/console"],function(e,t){var o=t("common/timedPromise");return function(t,n,r){if("function"!=typeof t)throw new Error("Callback must be a function(reject, resolve)");return n="number"==typeof n?n:5e3,new e(function(e,i){var a=n>0?setTimeout(function(){o.log("Promise timeout has been reached after "+n+" milliseconds: "+(r||"<no further information was given>")),i("string"==typeof r?r:"timeout")},n):void 0;try{t(function(t){a&&clearTimeout(a),e(t)},function(e){a&&clearTimeout(a),i(e)})}catch(e){o.error("An exception was thrown in timed promise callback",e),i(e)}})}}),o("common/utilities/base64Shim",[],function(){function e(e){var t,o,r,i,a,s;for(r=e.length,o=0,t="";o<r;){if(i=255&e.charCodeAt(o++),o==r){t+=n.charAt(i>>2),t+=n.charAt((3&i)<<4),t+="==";break}if(a=e.charCodeAt(o++),o==r){t+=n.charAt(i>>2),t+=n.charAt((3&i)<<4|(240&a)>>4),t+=n.charAt((15&a)<<2),t+="=";break}s=e.charCodeAt(o++),t+=n.charAt(i>>2),t+=n.charAt((3&i)<<4|(240&a)>>4),t+=n.charAt((15&a)<<2|(192&s)>>6),t+=n.charAt(63&s)}return t}function t(e){var t,o,n,i,a,s,c;for(s=e.length,a=0,c="";a<s;){do{t=r[255&e.charCodeAt(a++)]}while(a<s&&-1==t);if(-1==t)break;do{o=r[255&e.charCodeAt(a++)]}while(a<s&&-1==o);if(-1==o)break;c+=String.fromCharCode(t<<2|(48&o)>>4);do{if(61==(n=255&e.charCodeAt(a++)))return c;n=r[n]}while(a<s&&-1==n);if(-1==n)break;c+=String.fromCharCode((15&o)<<4|(60&n)>>2);do{if(61==(i=255&e.charCodeAt(a++)))return c;i=r[i]}while(a<s&&-1==i);if(-1==i)break;c+=String.fromCharCode((3&n)<<6|i)}return c}var o="undefined"!=typeof window?window:self,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];o.btoa||(o.btoa=e),o.atob||(o.atob=t)}),o("common/utils",["common/console","common/timedPromise","common/utilities/base64Shim"],function(e,t){function o(e){var t,o,n=$.indexOf(e);if(n<0)for($.push(e),t=0,o=Z.length;t<o;e(Z[t++]));}function n(e){var t=$.indexOf(e);t>=0&&$.splice(t,1)}function r(e){var t,o;for(t=0,o=$.length;t<o;++t)$[t](e);Z.push(e)}function i(e){var t=Z.indexOf(e);t>=0&&Z.splice(t,1)}function a(){return"undefined"==typeof window}function s(){return!a()}function c(e){return e}function l(e){return(e||"")+"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function d(e,t){var o,n=K.exec(e);if(n){if(o=K.exec(t))return parseInt(n[1])-parseInt(o[1]);throw new Error("Unexpected file name: "+t)}throw new Error("Unexpected file name: "+e)}function u(e,t){var o,n,r,i;return e===t?0:(o=X.exec(e),o?(n=X.exec(t),n?(r=parseInt(o[1]),i=parseInt(n[1]),r<i?-1:r>i?1:e.localeCompare(t)):1):-1)}function f(e,t){var o,n=[];for(o in e)e.hasOwnProperty(o)&&n.push(o);return n.sort(t)}function p(e){return e instanceof Array}function h(e){var t;if(null==e)return!0;if(e.length>0)return!1;if(0===e.length)return!0;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}function m(e){return new Uint8Array(e)}function g(e,t){t(m(e))}function b(e){return"object"==typeof e&&(e.buffer instanceof ArrayBuffer||void 0!==self.SharedArrayBuffer&&e.buffer instanceof self.SharedArrayBuffer)}function w(e){if(1===e.BYTES_PER_ELEMENT)return e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Cannot handle typed arrays with more than one byte per element")}function y(e,t){t(w(e))}function v(e){return e instanceof ArrayBuffer||void 0!==self.SharedArrayBuffer&&e instanceof self.SharedArrayBuffer}function k(e){return new Uint8Array(e)}function x(e,t){t(k(e))}function C(e){return e instanceof Blob}function A(e){var t=new FileReaderSync;return new Uint8Array(t.readAsArrayBuffer(e))}function E(e,t,o){var n=new self.FileReader;n.onloadend=function(e){t(new Uint8Array(e.result||e.target.result))},n.onerror=function(t){J.error("Error loading "+e.size+"-bytes blob into array",t),o&&o(t)},n.readAsArrayBuffer(e)}function _(e,t,o){if("function"!=typeof t)throw new Error("Callback must be a function");if(p(e))g(e,t);else if(b(e))y(e,t);else if(v(e))x(e,t);else{if(!C(e))throw new Error("Not an array-like object: "+e);E(e,t,o)}}function S(e){if(p(e))return m(e);if(b(e))return w(e);if(v(e))return k(e);if(C(e))return A(e);throw new Error("Not an array-like object: "+e)}function T(e){var t,o;for(t=new Date,o=new Date;o-t<e;o=new Date);}function M(){var e,t=(new Error).stack;return"string"==typeof t?(e=t.replace(/\t/g,"").split("\n"),e.shift(),e.shift(),e):[]}function j(e){var t,o,n,r,i=String.fromCharCode(160),a=e instanceof Blob?e.size:e,s=[{unit:1,suffix:"bytes",threshold:1e3,digits:0},{unit:1e3,suffix:"kB",threshold:1e6,digits:0},{unit:1e6,suffix:"MB",threshold:1e9,digits:10},{unit:1e9,suffix:"GB",threshold:Number.MAX_VALUE,digits:100}];for(t=0,o=s.length;t<o;++t)if(a<s[t].threshold)return 0===s[t].digits?Math.floor(a/s[t].unit)+i+s[t].suffix:(n=Math.floor(a/s[t].unit),r=Math.min(Math.round(a%s[t].unit/(s[t].unit/s[t].digits)),s[t].digits-1),n+(0===r?"":"."+r)+i+s[t].suffix)}function I(e,t){var o=e.name,n=o.lastIndexOf(".");return n>=0?o.substring(0,n)+"."+t:o+"."+t}function O(){return navigator.userAgent.toLowerCase().indexOf("trident")>=0}function F(e){var t,o,n,r,i,a=ee.exec(e);if(a){for(t=a[1]||"application/octet-stream",o=atob(a[2]),n=o.length,r=new Uint8Array(n),i=0;i<n;i++)r[i]=o.charCodeAt(i);return new Blob([r],{type:t})}throw new Error("Not a standards-conformant data URL: "+e)}function P(e,t,o){var n=new FileReader;n.onloadend=function(o){t("data:"+(e.type||"application/octet-stream")+";base64,"+self.btoa(o.target.result))},o&&(n.onerror=o,n.onabort=o),n.readAsBinaryString(e)}function N(){return self.performance&&self.performance.now()||(new Date).getTime()}function U(e){var t,o=e.length,n=new Array(o);for(t=0;t<o;++t)n[t]=e[t];return n}function R(e){for(var t=e.toString();t.length<2;)t="0"+t;return t}function z(e){var t,o,n,r=Math.floor(e/re);return e-=r*re,t=Math.floor(e/ne),e-=t*ne,o=Math.floor(e/oe),e-=o*oe,n=Math.floor(e/te),R(t)+":"+R(o)+"."+n}function B(e){var t,o,n,r,i,a,s,c,l,d;return e=e||document.baseURI||document.URL,!!(t=ie.exec(e.trim()))&&(o=t[1]&&t[1]+":"||"",n=t[4]||"",i=t[5]||"",r=n?n+(i?":"+i:""):"",a=t[6]||n&&"/"||"",s=t[7]&&"?"+t[7]||"",c=t[8]&&"#"+t[8]||"",l=o&&r&&o+"//"+r||"",d=l&&l+(a||"/")+(s||"")+(c||""),!(i&&!/^[1-9]\d*/.exec(i))&&{protocol:o,hostname:n,port:i,host:r,hash:c,pathname:a,search:s,origin:l,href:d})}function D(e){var t=/^(?:[^:\/]+:\/\/|\/\/)?(?:[^@\/]*@)?(?:www\.)?([^\/]+)/.exec(e.trim());return t&&t[1]||!1}function L(e,t){function o(e,t){"undefined"!=typeof localStorage&&localStorage.setItem(e,t)}function n(e){"undefined"!=typeof localStorage&&localStorage.removeItem(e)}function r(e){if("undefined"!=typeof localStorage)return localStorage.getItem(e)}function i(e){var t,o=r(e);return!!o&&(t=parseInt(o),isNaN(t)?(J.log("Legacy allocation failure for "+e+": "+o+", removing and will retry"),n(e),!1):(new Date).getTime()-t<ce?(J.log("Memory allocation for "+e+" has failed before, will not retry yet"),!0):(J.log("Memory allocation for "+e+" has failed before, removing and will retry"),n(e),!1))}function a(){var e,r;if(i(se))J.warn("Failed to allocate 256 MB (before), permanently failing");else try{return J.log("Trying to pre-allocate 256 MB"),e=""+(new Date).getTime(),o(ae,e),o(se,e),r=t?new self.SharedArrayBuffer(268435456):new self.ArrayBuffer(268435456),J.log("256 MB successfully allocated"),n(se),r}catch(e){J.warn("Allocating 256 MB failed, permanently failing: ",e)}}return e?new Uint8Array(8388608):function(){var e,r;if(i(ae))return J.warn("Failed to allocate 512 MB (before), going straight to 256 MB"),a();try{return J.log("Trying to pre-allocate 512 MB"),e=""+(new Date).getTime(),o(ae,e),r=t?new self.SharedArrayBuffer(536870912):new self.ArrayBuffer(536870912),J.log("512 MB successfully allocated"),n(ae),n(se),r}catch(e){return J.warn("Allocating 512 MB failed, falling back to 256 MB: ",e),a()}}()}function q(){var e,t,o,n,r,i={},a=B(),s=a.search?a.search.substring(1).split("&"):[];for(e=0,t=s.length;e<t;++e)o=s[e].split("="),n=decodeURIComponent(o[0]),r=!(o.length>1)||decodeURIComponent(o[1]),i[n]=r;return i}function W(e,t,o){var n,r=e.length;if(r<t){switch(o.growthStrategy){case"linear":r=Math.ceil(t/o.seedBufferSize)*o.seedBufferSize;break;case"exponential":default:r=Math.pow(2,Math.ceil(Math.log2(t)))}n=new Uint8Array(r),n.set(e,0),e=n}return e}function H(e,t){var o,n,r;if(0===t.indexOf("/"))return t;for(o=e.split("/"),n=t.split("/"),o.pop();n.length>0;)switch(r=n.shift()){case".":break;case"..":o.pop();break;default:o.push(r)}return o.join("/")}function G(e){return new t(function(t){function o(){self.hasOwnProperty(e)?t(self[e]):setTimeout(o)}setTimeout(o)},1e4,'Global variable name "'+e+'" not available')}function V(e){var t=e.lastIndexOf("/");return t>=0&&(e=e.substring(0,t)),0===e.length&&(e="/"),e}function Y(e,t){var o=B(0===e.indexOf("//")||0===e.indexOf("http://")||0===e.indexOf("https://")?e:"//"+e).hostname,n=B(0===t.indexOf("//")||0===t.indexOf("http://")||0===t.indexOf("https://")?t:"//"+t).hostname,r=o.split(".").slice(0,-1),i=n.split(".").slice(0,-1);return 1+r.length===i.length?r.join(".")===i.slice(1).join("."):r.length===i.length&&r.length>1&&r.slice(1).join(".")===r.slice(1).join(".")}function Q(e,t){var o,n,r=atob(e),i=new Uint8Array(r.length);for(o=0,n=r.length;o<n;++o)i[o]=r.charCodeAt(o);return new Blob([i],{type:t})}var J=e("commonUtils"),Z=[],$=[],K=/[A-Za-z]*([0-9]+)(\.[A-Za-z0-9]+)?/,X=/[^\d]*([\d]+)\.[A-Za-z0-9]+/,ee=/data:([^\/]*\/[^;,]*)(?:;base64)?,(.*)/,te=100,oe=1e3,ne=60*oe,re=60*ne,ie=/^(?:(?:([^:\/?#]+):)?\/\/(?:([^:@\/?#]*)(?::([^@\/?#]*))?@)?(\[[0-9A-Fa-f:]+\]|[0-9A-Fa-f]*:[0-9A-Fa-f]*:[0-9A-Fa-f:]*|[^:\/?#]+)(?::([^\/?#]+))?)?(\/?[^?#]*)?(?:\?([^#]*))?(?:#(.*))?$/,ae="aC7ac3yAc2oLl3Id5Yav6goC7nol_clipchamp_failed_512MB",se="aC7ac3yAc2oLl3Id5Yav6goC7nol_clipchamp_failed_256MB",ce=12e4;return Math.log2=Math.log2||function(e){return Math.log(e)*Math.LOG2E},{createGUID:l,insideWorker:a,outsideWorker:s,captureVariables:c,addWorkerStartedCallback:o,removeWorkerStartedCallback:n,workerStarted:r,workerTerminated:i,getSortedProperties:f,getUint8Array:_,getUint8ArraySync:S,fileNameComparatorFunc:d,pause:T,getStackFrames:M,getSemanticFileSize:j,swapFileExtension:I,isMSIE:O,isEmpty:h,readDataUrlIntoBlob:F,getCurrentTimeMillis:N,getJSArrayFromTypedArray:U,readBlobIntoDataUrl:P,renderRecordingClock:z,getBaseURL:B,validateSimplifiedURL:D,staggeredHeapAllocation:L,parseQueryString:q,isSiblingOrSubdomain:Y,imageFileNameComparator:u,base64ToBlob:function(e,t){if("string"==typeof e)return Q(e,t||"application/octet-stream");throw new Error("No string given")},cutOffFileFromPath:function(e){if("string"==typeof e)return V(e);throw new Error("Invalid file path: "+e)},waitUntilDefined:function(e){if("string"==typeof e&&e.length>0)return G(e);throw new Error("No global variable name defined")},mergeUrls:function(e,t){if("string"==typeof e&&"string"==typeof t)return H(e,t);throw new Error("Base or relative URLs are not strings")},conditionallyGrowArray:function(e,t,o){if(e instanceof Uint8Array){if("number"==typeof t&&t>=0){if("object"==typeof o&&o&&"number"==typeof o.seedBufferSize&&"string"==typeof o.growthStrategy)return W(e,t,o);throw new Error("Invalid options")}throw new Error("Required capacity must be a positive number")}throw new Error("Not a Uint8Array instance")}}}),o("common/handshaker",["promise","common/utils","common/console"],function(e,t,o){function n(t,o,n,i){function a(e){return n&&e.origin!==n&&"*"!==n?(r.debug("Received a message of unacceptable origin",e.origin,n),!1):e.source&&e.source!==o?(r.debug("Source/target missmatch",e.data&&e.data.messageNamespace,t),!1):!(!e.data||e.data.messageNamespace!==t)||(r.debug("Namespace mismatch when receiving message: "+e.data.messageNamespace+" (received) <> "+t+"(expected)",e.data),!1)}return function(s){function c(e){function s(){var t;u.removeEventListener("message",f);for(t in d)u.addEventListener(t,d[t]);e(u)}var c,l,u,f;n?(l=function(e){var r,i;for(e.messageNamespace=t,r=[e,n],i=1;i<arguments.length;++i)r.push(arguments[i]);o.postMessage.apply(o,r)},c=window):(l=function(e){e.messageNamespace=t,o.postMessage.apply(o,arguments)},c=o),u={postMessage:l,addEventListener:function(){return c.addEventListener.apply(c,arguments)},removeEventListener:function(){return c.removeEventListener.apply(c,arguments)}},f=function(e){if(a(e)&&"string"==typeof e.data.messageControl)switch(e.data.messageControl){case"handshake":u.postMessage({messageNamespace:t,messageControl:"ack"}),s();break;case"ack":s();break;default:r.warn("Received invalid control message: "+e.data.messageControl)}},u.addEventListener("message",f),i||u.postMessage({messageNamespace:t,messageControl:"handshake"})}var l,d="object"==typeof s?s:"function"==typeof s?{message:s}:{};return l=new e(c),l.then(null,function(e){r.error("Unable to establish communication",e),e.stack&&r.error(e.stack)}),{namespace:t,targetOrigin:n,isAcceptable:a,ensureHandshaken:function(e){return"function"==typeof e?l.then(e):l},tearDown:function(){var e,t=d;d={},l.then(function(o){for(e in t)o.removeEventListener(e,t[e])})}}}}var r=o("common/handshaker");return{createWorkerContextFactory:function(e,o){if("string"!=typeof e)throw new Error("Namespace must be a string");if(t.insideWorker()&&void 0===o)return n(e,self);if(t.insideWorker()||o===self||"object"!=typeof o||"function"!=typeof o.addEventListener||"function"!=typeof o.postMessage)throw new Error("Invalid target");return n(e,o)},createWindowContextFactory:function(e,t,o,r){return n(e,t,o,r)}}}),o("common/channels",["common/utils","common/handshaker","common/console"],function(e,t,o){function n(t){function o(e){var t,o=A[e.data.messageType];if(o)for(t=0;A&&o&&t<o.length;++t)o[t](e.data.messagePayload)}function n(e){return y.isAcceptable(e)&&void 0===e.data.messageControl&&"number"==typeof e.data.messageNumber&&"string"==typeof e.data.messageType}function i(e){C[e.data.messageNumber]=e}function a(e){var t=C[e];return t&&delete C[e],t}function s(e){do{++k,o(e)}while(e=a(k))}function c(e){try{if(n(e))if(e.data.messageNumber===k)r.debug('Received in-order message for namespace "'+y.namespace+'"',e.data),s(e);else{if(!(e.data.messageNumber>k))throw r.error("Received message number "+e.data.messageNumber+", which is behind the current event horizon: "+k,e),new Error("Received message ("+JSON.stringify(e.data)+"), which is behind the current event horizon: "+k);r.log('Out-of-order message receipt for message namespace "'+y.namespace+'", expecting message number '+k+", received message number "+e.data.messageNumber,e),i(e)}}catch(e){r.error("Error receiving message",e)}}function l(){y.tearDown()}function d(){l()}function u(e,t){var o,n=A[e];if("string"!=typeof e||"function"!=typeof t&&void 0!==t)throw new Error("Function called with invalid parameters");n?t?(o=n.indexOf(t))<0?r.warn('Trying to stop message receipt for message type "'+e+'" and same callback twice: ',A[e]):(n.splice(o,1),0===n.length&&delete A[e]):delete A[e]:r.warn('Trying to stop message receipt for mesage type "'+e+'" even though no callbacks are registered')}function f(e,t){var o;if("string"!=typeof e||"function"!=typeof t)throw new Error("Function called with invalid parameters");o=A[e],o?o.push(t):A[e]=[t]}function p(e,t){var o,n;if("string"!=typeof e||"function"!=typeof t)throw new Error("Function called with invalid parameters");o=function(){u(e,o),t.apply(void 0,arguments)},n=A[e],n?n.push(o):A[e]=[o]}function h(t,o,n,i){try{t.postMessage({messageType:o,messageNumber:x,messagePayload:n},e.isMSIE()?[]:i),x++}catch(e){throw r.error("Error sending message to remote context:",o,n,e),e}}function m(e,t,o){return y.ensureHandshaken(function(n){h(n,e,t,o)})}function g(e,t,o){if(!v)throw new Error("Unable to send synchronous message");h(v,e,t,o)}function b(t,o,n,r,i,a){var s="REQUEST_"+e.createGUID();return f(s,function(e){"responsePayload"in e?(u(s),r&&r(e.responsePayload)):void 0!==e.errorPayload?(u(s),i&&i(e.errorPayload)):void 0!==e.statusPayload?a&&a(e.statusPayload):(u(s),i&&i("Received ill-structured response to request: "+JSON.stringify(e)))}),m(t,{correlationId:s,requestPayload:o},n)}function w(e,t,o){var n=function(i){o||u(e,n),y.ensureHandshaken(function(e){function o(t){r.error("Now signaling error",t),h(e,n,{errorPayload:t.toString()+"\n"+t.stack})}var n=i.correlationId;try{t(i.requestPayload,function(t,i){try{h(e,n,{responsePayload:t},i)}catch(e){r.error("Error sending back regular response to remote context",t,e),o(e)}},function(t,i){try{h(e,n,{errorPayload:t},i)}catch(e){r.error("Error sending back error response to remote context",t,e),o(e)}},function(t,i){try{h(e,n,{statusPayload:t},i)}catch(e){r.error("Error sending back status response to remote context",t,e),o(e)}})}catch(e){r.error("Error processing request that was received in local context",i,e),o(e)}})};f(e,n)}var y,v,k=0,x=0,C={},A={};return y=t({message:c,close:d}),y.ensureHandshaken(function(e){v=e}),{sendMessage:m,sendMessageSync:g,onMessageReceipt:f,onMessageOnce:p,stopMessageReceipt:u,requestAndExpectResponse:b,onRequestSendResponse:w,destroy:l,readyToSynchronouslySend:function(){return new Promise(function(e){y.ensureHandshaken(e)})}}}var r=o("common/channels");return{createWorkerChannel:function(e,o){return n(t.createWorkerContextFactory(e,o))},createWindowChannel:function(e,o,r,i){if("string"!=typeof r)throw new Error("targetOrigin must be set for window channel");if("object"!=typeof o)throw new Error("targetWindow must be set for window channel");if(o===window)throw new Error("Can't use our own window for window channel");return n(t.createWindowContextFactory(e,o,r,i))}}}),o("button/colorize",[],function(){function e(e){function t(e){return parseInt(e,16)}var o,r,i=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,a=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,s=/^\s*#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])\s*$/,c=/^\s*#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})\s*$/;return e=e.toLowerCase(),e in n&&(e=n[e]),(o=i.exec(e))?r=[+o[1],+o[2],+o[3],+o[4]]:(o=a.exec(e))?r=[+o[1],+o[2],+o[3],1]:(o=s.exec(e))?r=[t(o[1]+o[1]),t(o[2]+o[2]),t(o[3]+o[3]),1]:(o=c.exec(e))&&(r=[t(o[1]),t(o[2]),t(o[3]),1]),r}function t(e){return"rgba("+(0|e[0])+","+(0|e[1])+","+(0|e[2])+","+e[3]+")"}function o(e){return[[e[2],e[0],e[1],e[3]],[e[1],e[2],e[0],e[3]]]}var n={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgrey:"#a9a9a9",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategrey:"#2f4f4f",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgrey:"#696969",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategrey:"#778899",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategrey:"#708090",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return{css:t,parse:e,triad:o}}),o("profile/button",["common/utils"],function(e){var t="https://api.clipchamp.com";return"undefined"!=typeof location&&location&&(t=e.getBaseURL(location.origin||location.protocol+"//"+location.hostname+":"+location.port).origin),{api:"https://api.clipchamp.com",auth:{gw:t+"/runtime/authorize",meter:t+"/runtime/meter"},upload:{azure:t+"/azure/upload",s3:t+"/s3/upload",youtube:{signature:t+"/youtube/upload",commit:t+"/youtube/commit",cors:t+"/youtube/cors"},gdrive:{signature:t+"/youtube/gdrive/upload",cors:t+"/youtube/gdrive/cors"},dropbox:t+"/youtube/dropbox/upload"}}}),o("apiConstraints",[],function(){return{preset:["web","mobile","windows","animation"],format:["mp4","flv","webm","webm_vp9","asf","gif"],resolution:["keep","240p","360p","480p","720p","1080p","320w","640w"],compression:["min","low","medium","high","max"],inputs:["file","camera","direct"],output:["azure","s3","youtube","gdrive","dropbox"],enable:["batch","fixup-webcam-webm","mobile-webcam-format-fallback","no-branding","no-error-bypass","no-hidden-run","no-popout","no-probe-reject","no-thank-you","no-user-retry"],experimental:["force-popout","overlong-recording","h264-hardware-acceleration"]}}),o("button/apiUtils",["./colorize","common/console","profile/button","apiConstraints"],function(e,t,o,n){function r(e){return e.join("\n")}var i=t("button/apiUtils");return function(t){function o(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function a(e){return String(e)}function s(t){return e.parse(t)&&t}function c(e,t,o){return e.indexOf(t)>=0||(i.error(o+" '"+t+"' is not valid, must be one of: "+e.join(", ")),!1)}function l(e){return function(t,o){if(c(o.valid,t,e))return t}}function d(e){function t(o,n){var r,a=[];if(o){if("string"==typeof o)return t(o.split(/\s*,\s*/),n);for(r=0;r<o.length;++r)c(n.valid,o[r],e)&&a.push(o[r]);return o.length&&!a.length?void i.error(e+" has no values"):a}}return t}function u(e,t){return function(o,n){var r=o-0,a=0|r;if(o!=r)i.error(e+" must be an integer");else{if(t)return t(a,n);if(void 0!==n.max&&a>n.max)i.error(e+" must be less than or equal to "+n.max);else{if(!(void 0!==n.min&&a<n.min))return a;i.error(e+" must be greater than or equal to "+n.min)}}}}function f(e,t){return function(o,n){var r;if(void 0!==o&&""!==o)if("number"!=typeof(r=parseFloat(o))||isNaN(r))i.error(e+" must be a number");else{if(t)return t(r,n);if(void 0!==n.max&&r>n.max)i.error(e+" must be less than or equal to "+n.max);else{if(!(void 0!==n.min&&r<n.min))return r;i.error(e+" must be greater than or equal to "+n.min)}}}}function p(e,t){return function(o,n){if("string"==typeof o&&isNaN(parseFloat(o))&&"keep"!==o)i.error(e+' must be "keep" or a positive number');else if("keep"!==o)if(o=parseFloat(o),isNaN(o)||"number"!=typeof o)i.error(e+' must be "keep" or a positive number');else if(o<=0)i.error(e+' must be "keep" or a positive number');else{if("function"==typeof t)return t(o,n);if(void 0!==n.max&&o>n.max)i.error(e+" must be less then or equal to "+n.max);else{if(!(void 0!==n.min&&o<=n.min))return o;i.error(e+" must be greater then "+n.min)}}}}function h(e){return function(t,o){return typeof t!==o.type?void i.error(e+" must be a "+o.type):t}}function m(){return function(e){var o,n={};if("object"==typeof e){for(o in e)o in t?"string"!=typeof e[o]?i.warn("Value is a not a string for localization id: "+o):n[o]=e[o]:i.warn(o+" is not a valid string localization id");return n}}}function g(e){return function(t){var o,n;if("string"==typeof t)return t;if("object"==typeof t){if(o=[],t&&"number"==typeof t.length)for(n=0;n<t.length;++n)"string"!=typeof t[n]?i.warn(e+" array contains non-string",t[n]):o.push(t[n]);else i.warn(e+" does not appear to be an array");return o}i.warn(e+" does not appear to be a string or an array")}}function b(e){return function(t){var o,n,r;if("object"==typeof t)if(t){if(t.files instanceof Array){for(o=[],n=0,r=t.files.length;n<r;++n)t.files[n]instanceof Blob?o.push(t.files[n]):i.warn(e+" contains an object that is not a Blob instance");return{files:o}}i.warn(e+" must be an array")}else i.warn(e+' - "direct" option must not be null');else void 0!==t&&i.warn(e+' "direct" option must be undefined or an object')}}function w(e){return function(t){if("object"==typeof t){if(t)return t;i.warn(e+" must not be null")}else void 0!==t&&i.warn(e+" must be undefined or an object")}}function y(e){return function(t){var o,n,r;if("object"==typeof t){if(t)return o={},n=parseFloat(t.from),r=parseFloat(t.to),"number"!=typeof n||Number.isNaN(n)?i.warn(e+" from must be undefined or a number"):o.from=n,"number"!=typeof r||Number.isNaN(r)?i.warn(e+" to must be undefined or a number"):o.to=r,o;i.warn(e+" must not be null")}else void 0!==t&&i.warn(e+" must be undefined or an object")}}function v(e){return function(t){var o,n,r,a,s;if("object"==typeof t){if(t)return o={},n=parseInt(t.x),r=parseInt(t.y),a=parseInt(t.width),s=parseInt(t.height),"number"==typeof n&&!Number.isNaN(n)&&n>=0?o.x=n:i.warn(e+" x must be an integer >= 0"),"number"==typeof r&&!Number.isNaN(r)&&r>=0?o.y=r:i.warn(e+" y must be an integer >= 0"),"number"==typeof a&&!Number.isNaN(a)&&a>0?o.width=a:i.warn(e+" width must be an integer > 0"),"number"==typeof s&&!Number.isNaN(s)&&s>0?o.height=s:i.warn(e+" height must be an integer > 0"),o;i.warn(e+" must not be null")}else void 0!==t&&i.warn(e+" must be undefined or an object")}}function k(e){return function(t){if("object"==typeof t)if(t){if(t.wrapper instanceof HTMLElement)return t.classname&&"string"!=typeof t.classname&&(i.warn(e+" class name must be a string"),delete t.classname),t;i.warn(e+" wrapper element must be given and be an instanceof HTMLElement")}else i.warn(e+" must not be null");else void 0!==t&&i.warn(e+" must be undefined or an object")}}function x(e){return function(t){var o,n;if("object"==typeof t)if(t)if("object"==typeof t.subtitles&&t.subtitles)if(o=Object.keys(t.subtitles).filter(function(e){var t=parseFloat(e);return"number"!=typeof t||isNaN(t)||t<0}),0===o.length){if(n=Object.keys(t.subtitles).filter(function(e){var o=t.subtitles[e];return"object"!=typeof o||null===o||"string"!=typeof o.text||["undefined","number"].indexOf(typeof o.duration)<0||"number"==typeof o.duration&&o.duration<0}),0===n.length)return t;i.warn(e+" invalid subtitles")}else i.warn(e+" invalid timely subtitle offsets");else i.warn(e+" subtitles must be a non-null object");else i.warn(e+" must not be null");else void 0!==t&&i.warn(e+" must be undefined or an object")}}function C(){return function(e){if("string"==typeof e)return e.replace(/[^A-Za-z0-9\_\-]/g,"_")}}function A(e){return function(t,o){return void 0===t?t:e(t,o)}}function E(e,t,o,n,r,i){var a="data-"+t.concat([e]).join("-");return o&&o.hasAttribute(a)?o.getAttribute(a):n&&(n[e]||""===n[e])?r[e]=n[e]:r&&r[e]?r[e]:i}function _(e,t,o,n,r,i){var a,s,c={};for(s in e)"object"==typeof e[s]?c[s]=_(e[s],t[s].fields,o.concat([s]),n,r[s]||{},i[s]||(i[s]={})):(a=E(s,o,n,r,i,t[s].defval),c[s]=e[s](a,t[s]),void 0===c[s]&&(c[s]=t[s].defval));return c}function S(e,t,n){var r,c={label:o,size:l("Size"),color:s,title:h("Title"),description:A(a),logo:h("Logo"),style:w("Style"),upload:{filename:A(C())},encoding:{preset:l("Preset"),format:l("Format"),resolution:l("Resolution"),compression:l("Compression"),fps:p("FPS"),trim:y("TrimConfig"),crop:v("Crop")},inputs:d("Input"),output:l("Output"),enable:d("Enable"),experimental:d("Experimental"),direct:b("Direct files"),camera:{limit:u("Limit",function(e){if(!(e<1))return e;i.error("Camera duration limit must be positive")}),aspect:f("Aspect ratio"),teleprompter:x("Teleprompter")},azure:{container:A(h("Container")),folder:A(h("GoogleDriveFolder"))},s3:{bucket:A(h("Bucket")),folder:A(h("GoogleDriveFolder"))},gdrive:{folder:A(g("GoogleDriveFolder"))},dropbox:{folder:A(g("DropboxFolder"))},youtube:{title:A(h("Title")),description:A(h("Description"))},localization:{strings:A(m())}};return t.encoding||(t.encoding={}),r=t.encoding,r.preset=r.preset||t.preset,r.format=r.format||t.format,r.resolution=r.resolution||t.resolution,r.compression=r.compression||t.compression,_(c,P,[],e,t,n)}function T(e,t,o){return _({inline:k("Inline")},P,[],e,t,o)}function M(e,t,o){return _({onUploadComplete:A(h("onUploadComplete")),onMetadataAvailable:A(h("onMetadataAvailable")),onPreviewAvailable:A(h("onPreviewAvailable")),onVideoCreated:A(h("onVideoCreated")),onWebcamStatusChange:A(h("onWebcamStatusChange")),onErrorOccurred:A(h("onErrorOccurred"))},P,[],e,t,o)}function j(e,t,o){var n={passive:S(e,t,o),active:M(e,t,o),embedding:T(e,t,o)};return n.passive.internal={},n.active.onPreviewAvailable&&(n.passive.internal.onPreviewAvailable=1),n.active.onMetadataAvailable&&(n.passive.internal.onMetadataAvailable=1),n.active.onWebcamStatusChange&&(n.passive.internal.onWebcamStatusChange=1),n.active.onErrorOccurred&&(n.passive.internal.onErrorOccurred=1),"blob"!==n.passive.output||n.active.onVideoCreated?"s3"!==n.passive.output||n.passive.s3.bucket?"azure"!==n.passive.output||n.passive.azure.container||i.error("Output is azure, but no container specified"):i.error("Output is s3, but no bucket specified"):i.error("Output is blob, but no onVideoCreated defined"),n}var I="string",O="object",F="number",P={label:{type:I,defval:"Upload with Clipchamp!",doc:r(["The Clipchamp button label.","This is the text that appears in the button,","which is placed into the wrapper element."])},size:{type:I,defval:"medium",valid:["tiny","small","medium","large"],doc:r(["The size of the Clipchamp button.","We offer four sizes to meet any website's design."])},title:{type:I,defval:["Your one stop video-upload shop","Ye' olde video-upload shoppe"][2*Math.random()|0],doc:r(["The title of the Clipchamp popup.","This is the text that appears at the top of the popup","<code>iframe</code>, which is shown after the user clicks","the Clipchamp button."])},description:{type:"hidden"},logo:{type:I,defval:"https://api.clipchamp.com/static/button/images/logo.svg",doc:r(["The URL of the logo image for the Clipchamp popup.","This is an image that is shown in the top-left corner of","the <code>iframe</code>."])},color:{type:I,defval:"#303030",doc:r(["Determines the color of the Clipchamp button","the background of the popup's title bar and other","graphical elements. Can be a color name (such as","<code>blue</code>, a hex-encoded color code (such as","<code>#3300cc</code>), or an RGB-encoded color (such as","<code>rgba(78,24,212,0.5)</code>)."])},style:{type:O,doc:r(["Allows for a detailed visual customization of the Clipchamp API's","visual appearance using CSS. A custom CSS stylesheet can be provided","as a URL (<code>style.url</code> property) or as CSS declarations string","(<code>style.text</code>). In both cases, the custom CSS declarations","augment, but do not replace the default user interface styling, based on the","Bootstrap 3 default styling. That is,","the custom CSS styling is layered on top of the existing CSS styling, where","existing CSS classes can be augmented, CSS properties be added or replaced.",'<span class="badge">Enterprise plan</span>']),defval:void 0,fields:{url:{type:I,defval:void 0,doc:r(["The URL of a custom CSS stylesheet that is loaded after the Clipchamp API's","default CSS styling. Must not be used in combination with the <code>style.text</code> setting."])},text:{type:I,defval:void 0,doc:r(["A custom CSS stylesheet, given as a string. The custom CSS stylesheet is instantiated","after the Clipchamp API's default styling. Must not be used in combination with","the <code>style.url</code> setting."])}}},inline:{type:O,doc:r(["Allows for an inline placement of the Clipchamp API's widget,","where the <code>iframe</code> that contains the Clipchamp widget","is placed inside a nominated wrapper element on the embedding page.",'<span class="badge">Enterprise plan</span>']),defval:void 0,fields:{wrapper:{type:"HTML element",defval:void 0,doc:r(["The wrapping HTML element on the embedding page. When calling the","Clipchamp API, any existing nested content of <code>inline.wrapper</code>","(including text content and child elements) will be removed."])},classname:{type:I,defval:void 0,doc:r(["An optional CSS class name to be attached to the <code>&lt;iframe&gt;</code>","that is placed inside the <code>inline.wrapper</code> element. This","<code>&lt;iframe&gt;</code> embeds the Clipchamp widget."])}}},encoding:{type:O,doc:r(["Configure output encoding parameters"]),fields:{preset:{type:I,defval:"web",valid:n.preset,doc:r(["The video conversion preset, which causes us to","produce an output video that is optimized for a","particular usage scenario or device. Notice that under","your subscription plan with us, only a subset of these","presets may be available."])},format:{type:I,defval:"mp4",valid:n.format,doc:r(["The output video format. Notice that the range of","supported formats is constrained by the setting for",'<code>preset</code>, i.e., the "web" preset supports','"mp4", "webm" and "webm_vp9"; "mobile" supports "mp4"; "windows"','supports "asf"; and "animation" supports "gif". Under',"your subscription plan with us, only a subset of these","formats may be available."])},resolution:{type:I,defval:"keep",valid:n.resolution,doc:r(["The resolution of the output video. All selections","are downscale only, thus if a lower resolution video is","submitted it will not be enlarged. This selection may be","further constrained by your plan. For instance, if your","plan supports up to <code>480p</code> (standard","definition) resolution, we will not produce output videos","with a higher resolution. <code>320w</code> and","<code>640w</code> produce videos with a limited width","rather than a limited height. If a resolution that is not","covered by your plan is selected, we will use the highest","setting available."])},compression:{type:I,defval:"medium",valid:n.compression,doc:r(["The compression ratio for the output video, where",'"max" generally compresses best and fastest at the','expense of compromising quality the most. In turn, "min"',"compresses the least and takes most time, while retaining","the best quality."])},fps:{type:F,defval:"keep",min:0,doc:r(["If the frame rate of the input video exceeds this number","it will be downsampled to match it. Videos that are","already at a lower frame rate, or those where the input frame",'rate cannot be determined will be unaffected. If omitted or set to "keep",',"the output video will have the same frame rate as the input video.","This setting does not have any effect on videos encoded with the",'"animation" preset.&nbsp;<span class="badge">BETA</span>'])},trim:{type:O,defval:void 0,doc:r(['Option to "trim" the output video by cutting in and out',"of the input video at timely offsets after the start of the","video (<code>trim.from</code>) and before the end of the video","(<code>trim.to</code>).<br/>","Does not currently work with the <code>mobile-webcam-format-fallback</code>",'flag (see <code>enable</code> parameter).&nbsp;<span class="badge">BETA</span>']),fields:{from:{type:F,defval:void 0,doc:r(["Timely offset in seconds within the input video where","the output video shall start. If given, <code>trim.from</code>","represents the number of seconds after the","start of the input video where the output video shall cut in."])},to:{type:F,defval:void 0,doc:r(["Timely offset in seconds within the input video where","the output video shall end. If given, <code>trim.to</code>","represents the number of seconds after the","start of the input video where the output video shall cut out."])}}},crop:{type:O,defval:void 0,doc:r(['Option to "crop" the video by defining a rectangular ',"area within the dimensions of the output video. When simultaneously downscaling ",'the input video (by setting the <code>resolution</code> parameter to a value different from <code>"keep"</code>), ',"the cropping region will apply to an output video, having potentially different (smaller) resolution than the input video. ","We will not automatically scale the cropping region alongside the input video video."]),fields:{x:{type:F,defval:void 0,doc:r(["Horizontal coordinate value of upper-left corner of cropping area."])},y:{type:F,defval:void 0,doc:r(["Vertical coordinate value of upper-left corner of cropping area."])},width:{type:F,defval:void 0,doc:r(["Width of cropping area in pixels."])},height:{type:F,defval:void 0,doc:r(["Height of cropping area in pixels."])}}}}},inputs:{type:I,defval:["file","camera"],valid:n.inputs,doc:r(["The sources the user can pick an input video from,","namely <code>camera</code> for her webcam and","<code>file</code> for her computer's file system.","The <code>direct</code> option instructs the Clipchamp API to","receive the input video file(s) without any end user action","directly through the <code>direct.files</code> parameter. Consequently,","the <code>direct</code> input option should not be used in combination with","any of the other two options (<code>file</code>, <code>camera</code>). If both","<code>direct</code> and <code>file</code> or <code>camera</code> are given in","the <code>inputs</code> array, then the <code>file</code>, <code>camera</code>","options will be ignored and the <code>direct.files</code> parameter is expected","to be an array of <code>Blob</code> instance(s)."])},output:{type:I,defval:"dummy",valid:["dummy","blob"].concat(n.output),doc:r(["The destinations where we will make the output",'video available or upload to. If "blob" is chosen, we',"provide the output video as a <code>Blob</code> to your",'client-side Javascript code. If you select "youtube",','"azure" or "s3", you need to authorize us to upload',"the video into the appropriate account from the",'subscription configuration page. The "dummy" output',"doesn't actually output anything at all, but it simulates","an upload using a simple timer and can be used for","initial integration and testing without having a backend","configured."])},upload:{type:O,defval:void 0,doc:r(["Settings that configure the upload process across all","supported upload destinations."]),fields:{filename:{type:I,defval:void 0,doc:r(["File name <i>fragment</i> that becomes a part of the","filenames of the uploaded video files in their respective","upload destination (see <code>output</code> setting).","That is, the complete file name further comprises a timestamp,","a random token, and (if available) the original file name of","the input video.","Notice that the string given in <code>upload.filename</code>","will be sanitized to only use these characters, digits,",'the underscore ("_"), and the "dash" (-) symbol.',"Other characters will be replaced with","an underscore symbol."])}}},camera:{type:O,fields:{limit:{type:"integer",defval:300,min:1,max:300,doc:r(["Limit camera recording length to a given","number of seconds. The maximum length is limited","by your plan and technical considerations."])},aspect:{type:F,defval:void 0,min:.01,max:100,doc:r(["The preferred recording aspect ratio, such as 4:3 or 16:9","as a float number, representing the width:height proportions.","The default is 4:3 for recordings in 360p and 480p (resulting in","a recording resolution of 480:360 and 640:480 pixels, respectively);","and 16:9 for recordings in 720p and 1080p (resulting in a recording","resolution of 1280:720 and 1920:1080 pixels, respectively).","Please note that the given aspect ratio is treated as a hint","to the underlying hardware (webcam or mobile camera) only. The camera's","firmware or device driver may choose to deviate from the requested","aspect ratio, ie., no specific recording resoluion can be guaranteed."])},teleprompter:{type:O,doc:r(["Show subtitle strings during a webcam recording (available in desktop browsers and","Chrome/Android with the <code>mobile-webcam-format-fallback</code> flag","given in the <code>enable</code> parameter array). The subtitle strings will","not become part of the recording and are visible when making the recording."]),fields:{subtitles:{type:O,doc:r(["The subtitles that will be shown during a webcam recording, keyed","by their timely offsets."]),fields:{"<timely offset in seconds>":{type:O,doc:r(["The timely offset of each subtitle forms the property key for the","details (subtitle <code>text</code> and <code>duration</code>) given below.","The timely offset is the timely offset in seconds (or fractions of seconds) from","the start of the recording. When the user pauses the recording, the time during which","the recording is paused is not considered when showing a subtitle. For instance, when","a subtitle's timely offset is 42 seconds, but the recording is paused after a mere 30","seconds have passed, we will only show that subtitle 12 seconds after resuming the recording."]),fields:{text:{type:I,defval:void 0,doc:r(["The subtitle string that is shown at the","given timely offset. Please note that the entire string will be","shown at the same time. Hence you need to make sure","that the text fits into the boundaries of the webcam recording."])},duration:{type:F,defval:void 0,doc:r(["The (optional) timley duration in seconds for which","the subtitle <code>text</code> will be shown. If <code>duration</code>","is not given, the subtitle <code>text</code> will be shown until the","timely offset of the next subtitle text is reached. If the <code>duration</code>","is given and the current timely offset <i>plus</i>the <code>duration</code>","exceeds the timely offset of the next subtitle, the current subtitle","will also be hidden when the next subtitle's timely offset is reached."])}}}}}}}},doc:r(["Configuration elements for customizing the camera","recording."])},direct:{type:O,fields:{files:{type:"blob",defval:[],doc:r(["Array of Javascript <code>File</code> or <code>Blob</code>","instances, representing the input video files if the <code>inputs</code>",'parameter is <code>["direct"]</code>.<br/>When the <code>direct.files</code> array',"contains multiple elements, the <code>batch</code> flag must added to the <code>enabled</code>","parameter. Otherwise, only the first array element will be used as the (single)","input video."])}},doc:r(['Extra parameters that apply to the <code>"direct"</code> option',"within the <code>inputs</code> parameter:"])},enable:{type:I,defval:[],valid:n.enable,doc:r(["Enable special behavior of the Clipchamp API:","<ul>","<li><code>batch</code> - allow multiple files to be","processed and uploaded in sequence without","further user interaction.</li>",'<li><code>fixup-webcam-webm</code> - "fixes" WebM webcam recordings',"which have incorrect or missing timely duration metadata.","Use this flag if you want to make sure that subsequent steps","in your video processing pipeline receive WebM files where","the embedded video metadata is correct and complete.","This flag does not currently apply to mobile devices","(ie., Android phones with the <code>mobile-webcam-format-fallback</code>",'flag set).&nbsp;<span class="badge">BETA</span></li>',"<li><code>mobile-webcam-format-fallback</code> - enable compression","of webcam recordings on mobile devices even when","the target <code>format</code> is not available","(experimental). This feature is currently restricted","to Chrome on Android where with this flag, the Clipchamp API","produces WebM files using the VP8 or VP9 video codec.</li>","<li><code>no-branding</code> - remove Clipchamp","branding from the UI, if available in your","plan.</li>","<li><code>no-error-bypass</code> - if transcoding","fails for whatever reason, normally Clipchamp","would resort to simply uploading the input file","as is. This flag suppresses that behavior. The most","common cause for transcoding failures are","unsupported input codecs.</li>","<li><code>no-hidden-run</code> - disable the option","to continue processing and uploading in the","background if the user closes the window after","clicking submit.</li>","<li><code>no-popout</code> - some browsers block","the use of certain features for third party code,","when this is detected Clipchamp will open a new","window in order to gain access to these features.","Setting <code>no-popout</code> suppresses this","behavior, and forces Clipchamp to try to make do","with what's available. This might lead to","increased memory requirements, among other","things.</li>","<li><code>no-probe-reject</code> - in case we are","unable to determine that an input file is a video","it would normally be rejected. This option accepts","all input files and skips straight to upload for","non-video files.</li>","<li><code>no-thank-you</code> - disable the thank you","screen and close window immediately. If there","were any errors encountered during the process","the last screen will still be displayed.</li>","<li><code>no-user-retry</code> - disable user confirmation","and retry option after a webcam recording was completed and","before the file is uploaded. Adding this flag will","immediately start the upload after the webcam recording","has ended. Users will not have a chance to repeat","their webcam recording.</li>","</ul>"])},experimental:{type:I,defval:[],valid:n.experimental,doc:r(["Enable experimental behavior of the Clipchamp API","<ul>","<li><code>force-popout</code> - always launch the user interface of",'the Clipchamp API in a separate "popout" browser window, even if',"it could run inside an <code>iframe</code> inside the embedding","website's DOM. Must not be used in conjunction with the <code>no-popout</code>","flag (<code>enable</code>) parameter.</li>","<li><code>overlong-recording</code> - allow webcam/mobile camera recordings","without any timely limitation of the recording duration (as otherwise enforced","by the Clipchamp API). The recording duration can still be deliberately limited","by setting a numeric value (number of seconds) in the <code>camera.limit</code> parameter.","Clients need to make sure to only set the <code>overlong-recording</code> flag in","supported browsers (currently: Chrome, Opera, and Firefox).</li>","<li><code>h264-hardware-acceleration</code> - enable hardware-accelerated H.264 video","encoding on supported platforms (currently: x86-based ChromeOS/Chromebook devices).","The flag only applies to the <code>web</code> (default) <code>preset</code> and the","<code>mp4</code> (default) format. Depending on the underlying hardware, a multiple","times speedup can be attained when setting the <code>h264-hardware-acceleration</code>","flag. Clients will experience different compression ratio for the same (subjective) ","perceived output quality and are thus encouraged to adjust the <code>compression</code>","parameter to yield an acceptable quality/compression tradeoff.</li>","</ul>"])},s3:{type:O,fields:{bucket:{type:I,defval:void 0,doc:r(["Target bucket for S3 upload.","Value is required if uploading to S3."])},folder:{type:I,defval:void 0,doc:r(["(Optional) Target folder for S3 upload.","If specified, uploaded files will be placed in","this folder, i.e. the S3 key will have this as","a prefix."])}},doc:r(["Configuration elements when using Amazon S3 upload",'target. (<a class="underlink" href="https://blog.clipchamp.com/uploading-videos-from-clipchamp-button-to-aws-s3" target="_blank">configuration instructions for S3</a>)'])},azure:{type:O,fields:{container:{type:I,defval:void 0,doc:r(["Target container for blob storage upload.","Value is required if uploading to Azure."])},folder:{type:I,defval:void 0,doc:r(["(Optional) Target folder for azure upload.","If specified, uploaded files will be placed in","this folder, i.e. the blob name will have this as","a prefix."])}},doc:r(["Configuration elements when using Microsoft Azure",'blob storage upload target. (<a class="underlink" href="https://blog.clipchamp.com/uploading-videos-from-clipchamp-button-to-windows-azure" target="_blank">configuration instructions for Azure</a>)'])},gdrive:{type:O,fields:{folder:{type:I,defval:void 0,doc:r(["(Optional) Target folder for Google Drive","upload. If specified, uploaded files will be","placed in this folder. Relative to the globally","configured root folder. If the folder doesn't","exist, it will be created. Can be specified as a","'/'-delimited path, or (e.g. if you have '/' in","a folder name) using an array of strings.","<b>NOTE</b>: We do cache the Google-assigned","ID of the folder, which means if the folder","is moved (or removed) we will continue","uploading to it in its new location for","some time."])}},doc:r(["Configuration elements when using Google Drive","upload target."])},dropbox:{type:O,fields:{folder:{type:I,defval:void 0,doc:r(["(Optional) Target folder for the Dropbox upload.","If specified, uploaded files will be placed in this folder,","which needs to be either relative to the root folder that is",'configured in the Clipchamp API settings ("/" if none is configured)',"or an absolute path, which includes the configured root folder at","the start.<br>","You are responsible to make sure that the folder in the Dropbox","account remains intact. When the folder is removed, renamed or has its","access permissions changed, uploads will fail."])}}},youtube:{type:O,fields:{title:{type:I,defval:void 0,doc:r(["(Optional) Assign this title to the","video when it is uploaded."])},description:{type:I,defval:void 0,doc:r(["(Optional) Assign this description to the","video when it is uploaded."])}},doc:r(["Configuration elements when using YouTube","upload target."])},onWebcamStatusChange:{type:"function",defval:void 0,signature:"status",doc:r(["Callback function is invoked for a number of events affecting the recording of videos and","the webcam or phone camera as such, where <code>status</code> is a <code>String</code> reflecting","the new status of the webcam or the recording:","<ul>","    <li><code>capture_started</code> - the webcam or phone camera was successfully switched","    on and is capturing (but not yet recording) a video stream</li>","    <li><code>capture_ended</code> - the webcam or phone camera was switched off and is no","    longer capturing a video stream</li>","    <li><code>capture_failed</code> - accessing the webcam or phone camera failed","    <li><code>recording_running</code> - the webcam recording has started or was resumed after it was previously paused","    <li><code>recording_paused</code> - the webcam recording was paused and can later be resumed or finished","    <li><code>recording_finished</code> - the webcam recording has finished, but may still be processing","    before it is being uploaded or made available in the <code>onVideoCreated</code> callback","    <li><code>recording_cancelled</code> - the webcam recoding was cancelled","</ul>","Tracking the status of the webcam or phone camera is supported in desktop browsers (and in Chrome on Android","when the <code>mobile-webcam-format-fallback</code> flag is set in the <code>enable</code> parameter array)."])},onMetadataAvailable:{type:"function",defval:void 0,signature:"metadata",doc:r(["Callback function is invoked for every webcam recording and input video file,","when the webcam recording or input video file was successfully analyzed.","The <code>metadata</code> parameter is an object having the following properties:","<ul>","   <li><code>raw</code> - the raw video metadata, being an object with the following properties:</li>","   <ul>","       <li><code>format</code> - video container format information</li>","       <li><code>streams</code> - array of video, audio, subtitle, data, etc. streams contained in the video</li>","   </ul>","</ul>","Notice that when the user chooses to discard and repeat a webcam recording,","this callback will be invoked multiple times with the metadata of the different recordings.","<code>onMetadataAvailable</code> will also be invoked multiple times when using the <code>batch</code> flag,","where the user can select multiple input videos.",'&nbsp;<span class="badge">BETA</span>'])},onPreviewAvailable:{type:"function",defval:void 0,signature:"imageBlob",doc:r(["<code>onPreviewAvailable</code> is called with","the preview image when one is available. Note that","the parameter is a <code>Blob</code> instance and not a URL, the image is not","uploaded to the nominated upload destination alongside the output video.","Also note that not all scenarios","will produce a preview image, particularly so if the input video is corrupt or","contains invalid/incomplete metadata.",'&nbsp;<span class="badge">BETA</span>'])},onUploadComplete:{type:"function",defval:void 0,signature:"data",doc:r(["Callback function that is invoked once, when the","output video has completed uploading, where a single","<code>data</code> object contains meta information about","the uploaded file. There are two common properties:","<ul>","<li><code>filename</code> - the original","video filename</li>","<li><code>duration</code> - the video duration. This","field may be absent in certain situations</li>","</ul>","There are as a well a number of","<code>output</code>-specific properties:","<ul>",'<li>If using output "youtube"',"<ul>",'<li><code>kind</code> - "youtube"</li>',"<li><code>id</code> - the video ID</li>","<li><code>url</code> - the view URL</li>","<li><code>embedHtml</code> - the HTML","snippet provided by YouTube for","embedding the video (if provided).</li>","</ul>","</li>",'<li>If using output "azure"',"<ul>",'<li><code>kind</code> - "azure"</li>',"<li><code>blob</code> - the actual Azure blob","name ultimately used when storing","the upload.</li>","</ul>","</li>",'<li>If using output "s3"',"<ul>",'<li><code>kind</code> - "s3"</li>',"<li><code>key</code> - the actual Amazon S3","object key ultimately used when storing","the upload.</li>","</ul>","</li>",'<li>If using output "gdrive"',"<ul>",'<li><code>kind</code> - "gdrive"</li>',"<li><code>id</code> - the Google file ID</li>","<li><code>name</code> - the name of the file","as stored in Google Drive.</li>","<li><code>url</code> - a URL to the file</li>","<li><code>folder</code> -","the Google folder ID the file is in, or",'"root" if at the top level.</li>',"</ul>","</li>",'<li>If using output "dropbox"',"<ul>",'<li><code>kind</code> - "dropbox"</li>',"<li><code>id</code> - the Dropbox file ID</li>","<li><code>name</code> - the name of the file as stored on Dropbox</li>","<li><code>path</code> - the file path on Dropbox</li>","<li><code>link</code> - the shared link of the file on Dropbox","(requires the corresponding option to be toggled in the Clipchamp API settings)</li>","</ul>","</li>",'<li>If using output "blob"',"<ul>",'<li><code>kind</code> - "blob"</li>',"<li><code>data</code> - array of whatever","<code>onVideoCreated</code> resulted","in</li>","</ul>","</li>","</ul>"])},onVideoCreated:{type:"function",defval:void 0,signature:"blob [,done [,fail [,notify]]]",doc:r(["<code>onVideoCreated</code> is called if the output",'is set to "<code>blob</code>" and the output video blob',"will be passed as the first parameter. The blob is valid","until this function finishes processing which is","determined using either one of three cases:","<ol>","<li>If the function signature contains at least a","done parameter and either done or fail callback","is called.</li>","<li>If a promise (or thenable) is returned, wait for","it to be resolved or rejected.</li>","<li>If the function returns something other than a","promise, and doesn't specify at least a","done-callback parameter, the processing will be","considered completed immediately on return.</li>","</ol>","Until the function completes processing the output file",'is considered as "being uploaded". If a promise capable',"of progress reports is returned (i.e. where the","then-function accepts a third callback), or if the notify","callback is used, a numeric progress will be interpreted","as an upload completion percentage and will be displayed","as such on","screen. After the processing is completed","(as determined above) the blob can no longer be used","reliably as the backing store may have been removed."])},onErrorOccurred:{type:"function",defval:void 0,signature:"error",doc:r(["<code>onErrorOccurred</code> is called when an error","was detected while recording, processing, or uploading a video","or webcam/camera recording. The <code>error</code> parameter is an","object with a mandatory <code>type</code> property, which","can be one of the following:","<ul>","    <li><code>webcam_processing</code>, when the error happened during","        a webcam (or phone camera) recording;</li>","    <li><code>video_processing</code>, when the error happened while","        an input video or webcam/camera recording was processed","        (transcoded/compressed) prior to uploading the video;</li>","    <li><code>video_uploading</code>, when the error happened while","        the processed output video file was being uploaded to its","        selected storage location;</li>","    <li><code>other_unknown</code>, when the cause of the error is something","        else or is even unknown;</li>","</ul>","A second (optional) property <code>message</code> represents a human-readable","error explanation. You can use the string value of the <code>message</code> property","to show an error message to your users. An optional <code>details</code> property","is an array that contains further technical information about the error, such","as exceptions, error events and the like. Use the value of the <code>details</code> property","to communicate any issues to the Clipchamp support staff.","The <code>onErrorOccurred</code> callback may occasionally be called multiple times","for the same root cause. Please note that the Clipchamp API has the provisions","to compensate for some of the incidents that are reported to the <code>onErrorOccurred</code>","callback. For instance, the <code>no-probe-reject</code> flag (<code>enable</code> parameter","array) will make sure a video file is passed down to the video transcoding engine","even if we could not extract technical metadata from that file."])},localization:{type:O,fields:{strings:{type:O,defval:void 0,doc:r(["A key-value mapping for providing string","localization. See the string localization table","for a list of keys and their default values","which can be used as a guide for translation.","If a key is omitted, it will retain its default","value.","<em>NOTE:</em> New strings may be added as","new features are implemented."])}},doc:r(["Localization options"])}};return{populateOptions:j,configureProcess:S,configureIntegration:M,optionSpecs:P}}}),o("main-frame-i18n",[],function(){return{btn_cancel_upload:"Cancel Upload",btn_close:"Close",btn_record_again:"Record again",btn_record_video:"Record Video",btn_retry:"Try again",btn_select_file:"Select File",btn_select_or_drop_file:"Select or Drop File",btn_try_again:"Try again",bummer:"Bummer",confirm_close:"Caution: Your video will be lost, click OK to confirm",confirm_leave:"Your video has not yet finished uploading, if you leave now the process will be canceled.",download:"Download",drop_video_here:"Drop your video here.",err_processing:"couldn't be processed",err_upload:"couldn't be uploaded",err_video_filename:"doesn't look like a video file",err_video_probe:"could not be determined to be a video",err_video_transcode:"failed to compress",failure_because:"It appears we're here because",failure_count:"Failures",failure_meanwhile:"Meanwhile",failure_partial_because:"file(s) failed to process, and it appears",failure_partial_however:"However",failure_preview:"Could not extract preview image.",failure_upload:"We were unable to upload your video, this might be due to a loss in network connectivity. Would you like to try again?",first_use:"First use, loading transcoder module",not_now:"Not now",ooops:"Ooops",outdated_browser_info:"You are using an outdated version of",outdated_browser_link:"For best performance, download the latest version.",please_wait:"Please wait",record_is_not_supported:"We're sorry, video recording is unfortunately not supported by your browser",record_unavailable:"Unavailable",something_went_wrong:"something went terribly wrong, we're trying our darndest to figure out why.",submit_video:"Submit Video",task_finalize:"Finalizing",task_retry:"Retrying",task_transcode:"Preparing",task_upload:"Uploading",task_validate:"Analyzing",thank_you:"Thank you!",time_remaining:"Remaining:",video_uploaded:"Your video has been uploaded.",webcam_allow:"Please allow us to enable your webcam",webcam_camera:"Camera",webcam_cancel:"Cancel",webcam_default_camera:"Default camera",webcam_default_mic:"Default microphone",webcam_loading:"Loading",webcam_microphone:"Microphone",webcam_one_moment:"One moment",webcam_ooops:"Ooops, something went wrong",webcam_postproc:"Post processing ...",webcam_rec_continue:"Continue Recording",webcam_rec_finish:"Finish Recording",webcam_rec_space_to_toggle:"Press 'Space Bar' to toggle record/pause",webcam_rec_start:"Start Recording",webcam_res_hi:"High Definition",webcam_res_lo:"Low Definition",webcam_res_std:"Standard Definition",webcam_still_loading:"we\\'re still loading ..."}}),o("common/leaderFollower",["promise","common/console","common/timedPromise"],function(e,t,o){function n(){function t(e,t){var o=!1;l=e,l.func(function(){o?r.warn("Function "+e.id+" has already called back before",e.func):(o=!0,d(t||0))})}function n(e){t(e)}function s(e){var t={id:a++,func:e};l?u.push(t):n(t)}function c(){u=[]}var l,d,u=[];return d=function(e){function o(e){u.length>0?t(u.shift(),e):l=void 0}e>i?setTimeout(function(){o(0)},0):o(e+1)},{enqueueFunction:s,discardQueued:c,createTimedPromise:function(t,n,i){if("function"==typeof t)return new e(function(e,a){r.log("Now queuing timed promise"),s(function(s){r.log("Now running previously queued timed promise"),new o(t,n,i).then(function(t){r.log("Timed promise has completed successfully",t),e(t),s()},function(e){r.error("Timed promise has resulted in an error",e),a(e),s()})})});throw new Error("No promise callback was given: "+t)}}}var r=t("common/leaderFollower"),i=10,a=0;return{createLeaderFollowerQueue:n}}),o("button/buttonUtils",["promise","common/utils","common/channels","common/console","button/apiUtils","main-frame-i18n","common/leaderFollower"],function(e,t,o,n,r,i,a){function s(t,n,r){return new e(function(e,i){var a=o.createWindowChannel("clipchamp-bus",n,A,x);a.requestAndExpectResponse("initialize",{token:E,css:y.optionSpecs&&y.optionSpecs.style&&y.optionSpecs.style.defval&&y.optionSpecs.style.defval.url},[],function(o){var i,s={container:r,channel:a,frame:t,window:n};w.log("Received response to main frame initialization",o);for(i in o)s[i]=o[i];e(s)},i)})}function c(){var t=window.open(_,T,j);return t?s(t,t,void 0):e.reject("blocked")}function l(t,o){var n;return document.getElementById(T)?e.reject("Trying to embed clipchamp twice - did you load the clipchamp script multiple times?"):(n=document.createElement("iframe"),n.setAttribute("id",T),n.setAttribute("name","clipchamp_main"),n.setAttribute("src",_),n.setAttribute("allow","microphone; camera"),o&&(t.innerHTML="",n.style.display="none"),t.appendChild(n),s(n,n.contentWindow,t))}function d(n){var r=t.createGUID(M),i=document.createElement("div"),a=document.createElement("iframe");return new e(function(e){for(i.style.display="inline-block",i.style.border="none",i.style.width="0px",i.style.height="0px",i.style.position="relative",i.style.padding="0px",i.style.margin="0px",a.id=r,a.src=S,a.name="clipchamp_button",a.style.border="none",a.style.backgroundColor="transparent",a.style.height="100%",a.style.width="100%";n.firstChild;)n.removeChild(n.firstChild);i.appendChild(a),n.appendChild(i),a.addEventListener("load",function(){var t=o.createWindowChannel("clipchamp-bus",a.contentWindow,A);t.onMessageReceipt("refresh",function(e){i.style.width=e.dimensions.width+"px",i.style.height=e.dimensions.height+"px"}),e(t)})})}function u(e,o){function n(t){var o;for(o=0;o<i.length;++o)i[o](t);delete F[e]}var r,i=[o];if(e){if(O[e])o(O[e]);else if(F[e])return void F[e].push(o)}else o(e);F[e]=i,r=new XMLHttpRequest,r.onreadystatechange=function(){4===this.readyState&&(this.status>=200&&this.status<400&&this.response instanceof Blob?t.readBlobIntoDataUrl(this.response,function(t){n(O[e]=t)}):n(O[e]=e))},r.open("GET",e),r.responseType="blob",r.send()}function f(e){var t=document.createElement("a");return t.href=e,t.href}function p(o,n,r){var i,a;return o.spec=y.populateOptions(n,r,o.options),i=o.spec.passive,i.logo&&(a=t.getBaseURL(f(i.logo)),a.protocol&&"https:"!==a.protocol)?new e(function(e){u(i.logo,function(t){i.logo=t,e()})}):e.resolve()}function h(e,t){if(t.spec.passive.enable.indexOf("no-popout")>=0||t.spec.passive.experimental.indexOf("no-popout")>=0)return!1;if(t.spec.passive.enable.indexOf("force-popout")>=0||t.spec.passive.experimental.indexOf("force-popout")>=0)return'"force-popout" is set';if(/edge\/[\w.]+/.exec(window.navigator.userAgent.toLowerCase()))return!1;if(/Version\/11\.[^\s]*\s+Safari\/.*/.test(window.navigator.userAgent))return"Safari does not allow accessing the webcam in cross-domain <iframes>";if(e){if(e.popout)return"preferred capabilites are not available in iframes on this browser";if(I&&t.spec.passive.inputs.indexOf("camera")>=0&&e.webcam)return"camera input is selected and we're on HTTP (some browsers only allow this when using HTTPS)"}return!1}function m(t){return new e(function(e,o){v.enqueueFunction(function(n){t().then(function(t){e(t),n()}).catch(function(e){o(e),n()})})})}function g(e,t){return e.then(function(e){return e.frame.parentElement!==t})}function b(e){return e.then(function(e){return e.channel.destroy(),e.container.removeChild(e.frame),e})}var w=n("common/console"),y=r(i),v=a.createLeaderFollowerQueue(),k=document.currentScript||function(){var e,t=document.getElementsByTagName("script");for(e=0;e<t.length-1;++e)if(/\/[-A-Za-z0-9._]{16,}\/button.js/.test(t[e].src))return t[e];return t[t.length-1]}(),x=1,C=t.getBaseURL(k.src),A="https://"+C.host,E=C.pathname.split("/")[1],_=A+"/static/button/main-frame.html",S=A+"/static/button/button-frame.html?"+E,T=t.createGUID("CLIPCHAMP_MAIN_"),M="CLIPCHAMP_BUTTON_",j=["menubar=no","location=no","status=no","width=600","height=600"].join(","),I=function(){var e=t.getBaseURL(window.location.href);return e&&"https:"!==e.protocol&&"localhost"!==e.hostname}(),O={},F={};return{get buttonScriptElement(){return k},get clipchampOrigin(){return A},get embeddedOnHttpPage(){return I},popoutMainFrame:function(){return c()},embedMainFrame:l,embedButtonFrame:function(e){if(e instanceof Element)return d(e);throw new Error("Parent element is not an element")},sanitizeApiOptions:function(e,t,o){if(e&&e.options){if(void 0===t||t instanceof Element){if(void 0===o||"object"==typeof o)return p(e,t,o);throw new Error("Options are given, but they are not an object")}throw new Error("An element was given, but it is not an instance of Element")}throw new Error("Invalid store")},preferPopout:h,blockUntilDone:function(e){if("function"==typeof e){if(0===e.length)return m(e);throw new Error("Promise returner function must not take any arguments")}throw new Error("Promise returner is not a function")},needsNewFrame:function(e,t){if(e&&"function"==typeof e.then){if(t instanceof Element)return g(e,t);throw new Error("Wrapper element is no DOM element")}throw new Error("Main frame promise is no promise")},destroyOldFrame:function(e){if(e&&"function"==typeof e.then)return b(e);throw new Error("Main frame promise is no promise")}}}),o("utils/nopromise",["promise","common/console"],function(e,t){function o(e,t){return e&&"function"==typeof e.then?e:{then:function(a,s){var c=t===r?a:s;if("function"!=typeof c)return o(e,t);try{return o(c(e),r)}catch(e){return n.error("Exception in noPromise",e),o(e,i)}},chuck:function(){if(t===i)throw e}}}var n=t("utils/nopromise"),r=!0,i=!1;return{resolve:function(e){return o(e,r)},reject:function(e){return o(e,i)},async:function(t,a){var s,c;if(t)return new e(a);s="sync/async mismatch",c=i;try{a(function(e){c=r,s=e},function(e){c=i,s=e})}catch(e){n.error("Exception in sync noPromise",e),c=i,s=e}return o(s,c)}}}),o("button/helpers/mainFrameHelper",["common/console"],function(e){function t(e,t,n,r){function i(e,t,o,n,r){function i(){s++||o([].slice.apply(arguments))}function a(){s++||n([].slice.apply(arguments))}var s=0;setTimeout(function(){var o;try{o=e(t,i,a,r),o&&"function"==typeof o.then?o.then(i,a,r):e.length<2&&i()}catch(e){a(e)}})}function a(e,t,o,n,r){function a(e){"number"==typeof e?r(["upload",{progress:e}]):"number"==typeof e.progress&&r(["upload",{progress:e.progress}])}i(e,t,o,n,a)}var s={upload:"onVideoCreated",preview:"onPreviewAvailable"},c={probe:"onMetadataAvailable",webcam:"onWebcamStatusChange",error:"onErrorOccurred"};return o.log("Establishing new main frame communication",e),e.channel.onMessageReceipt("close",function(){e.hide()}),e.channel.onMessageReceipt("fatal",function(){var o;for(e.hide(),r(),o=0;o<t.length;o++)t[o].sendMessage("fatal")}),e.channel.onMessageReceipt("end",function(e){e.id in n&&(n[e.id].success(),delete n[e.id])}),e.channel.onMessageReceipt("success",function(e){var t;e.id in n&&(t=n[e.id],e.upload&&t.callbacks.onUploadComplete&&setTimeout(function(){t.callbacks.onUploadComplete(e.upload)}))}),e.channel.onMessageReceipt("failure",function(){}),e.channel.onMessageReceipt("progress",function(e){e.id in n&&n[e.id].progress(e)}),e.channel.onRequestSendResponse("blob",function(e,t,o,r){var i,c;e.id in n&&(i=n[e.id],c=s[e.target],i.callbacks[c]?a(i.callbacks[c],e.blob,t,o,r):o("No "+c+" callback"))},!0),e.channel.onRequestSendResponse("array",function(e,t,o,r){var i,c,l;e.id in n&&(i=n[e.id],c=s[e.target],i.callbacks[c]?(l=new Blob([e.array],{type:e.type}),a(i.callbacks[c],l,t,o,r)):o("No "+c+" callback"))},!0),e.channel.onRequestSendResponse("message",function(e,t,o){var r,a;e.id in n&&(r=n[e.id],a=c[e.target],r.callbacks[a]?i(r.callbacks[a],e.message,t,o):o("No "+a+" callback"))},!0),e}var o=e("button/helpers/mainFrameHelper");return{establishMainFrameCommunication:function(e,o,n,r){if(e&&e.channel&&"function"==typeof e.channel.onRequestSendResponse&&"function"==typeof e.channel.onMessageReceipt){if(Array.isArray(o)){if("object"==typeof n&&n){if("function"==typeof r)return t(e,o,n,r);throw new Error("Unrecoverable callback is no function")}throw new Error("No site interfaces given")}throw new Error("No button channels given")}throw new Error("Not a main frame")}}}),o("button/reinventTheWheel",["common/utils"],function(e){function t(e,o){var n;if(o)for(n in o)"object"!=typeof e[n]||"object"!=typeof o[n]||Array.isArray(e[n])||Array.isArray(o[n])?e[n]=o[n]:t(e[n],o[n]);return e}function o(e,t){var o=e[n];return o||(o={},e.nodeType?e[n]=o:Object.defineProperty(e,n,{value:o,configurable:!0}),t(o)),o}var n=e.createGUID("clipchamp");return{getDataStore:function(e,t){if(e instanceof Element||"object"==typeof e&&e){if("function"==typeof t)return o(e,t);throw new Error("Initializer callback is not a function")}throw new Error("Invalid data anchor to attach data store to")},extend:t,parameters:function(e,t){var o={};if("object"==typeof e)o=e;else{if(!t)throw new Error("Neither object nor key-value pair given");o[e]=t}return o}}}),o("button/frameStyler",["promise","common/utils"],function(e,t){function o(e,t){var o,n,r="";for(o in e)e.hasOwnProperty(o)&&(r+=o+":"+e[o]+";");n=document.createElement("style"),n.type="text/css",n.innerHTML="."+t+"{"+r+"}",document.head.appendChild(n)}function n(e){return e=e||event,e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,!1}var r,i={width:"600px",height:"600px","max-width":"100%","max-height":"100%",border:"none"},a={position:"absolute",width:"600px",height:"600px","max-width":"100%","max-height":"100%",left:"50%",top:"50%","-ms-transform":"translate(-50%,-50%)","-moz-transform":"translate(-50%,-50%)","-webkit-transform":"translate(-50%,-50%)",transform:"translate(-50%,-50%)",border:"none","background-color":"transparent"},s={"-ms-transform":"none","-moz-transform":"none","-webkit-transform":"none",transform:"none"},c={"z-index":2147483647,position:"fixed",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","background-color":"rgba(0,0,0,0.7)"},l=t.createGUID("clipchamp-main-frame"),d=t.createGUID("clipchamp-main-inline"),u=t.createGUID("clipchamp-background");return o(i,d),o(a,l),o(s,l+":fullscreen"),o(s,l+":-ms-fullscreen"),o(s,l+":-moz-full-screen"),o(s,l+":-webkit-full-screen"),o(c,u),r=new e(function(e){function t(){var o=document.createElement("div");window.removeEventListener("load",t),o.className=u,o.style.display="none",o.addEventListener&&o.addEventListener("DOMMouseScroll",n),o.onmousewheel=o.onwheel=o.ontouchmove=o.onkeydown=n,o.onfocus=function(){o.firstChild.focus()},document.body.appendChild(o),e(o)}window.addEventListener("load",t),document.body&&t()}),{get BACKGROUND_ELEMENT_PROMISE(){return r},showMainFrame:function(e,t){t&&t.wrapper?(e.frame.className=t.classname||d,e.frame.style.display="block",e.hide=function(){e.frame.style.display="none"}):(e.frame.className=l,e.container.style.display="block",e.hide=function(){e.container.style.display="none"})},decoratePopout:function(e){e.hide=function(){"function"==typeof e.frame.close&&e.frame.close()}}}}),o("button/helpers/mainFrameInsurance",["common/console","button/buttonUtils","button/helpers/mainFrameHelper","button/frameStyler","utils/nopromise"],function(e,t,o,n,r){function i(e){function i(n){return c.log("Now embedding main frame in wrapper element",n),t.embedMainFrame(n,e).then(function(e){return o.establishMainFrameCommunication(e,l,d,function(){u=!0}),s=r.resolve(e)})}return t.blockUntilDone(function(){return n.BACKGROUND_ELEMENT_PROMISE.then(function(o){var n=e&&e.wrapper||o;return s?t.needsNewFrame(s,n).then(function(e){return e?t.destroyOldFrame(s).then(function(){return i(n)}):s}):i(n)})})}function a(){return t.blockUntilDone(function(){return t.popoutMainFrame().then(function(e){return o.establishMainFrameCommunication(e,l,d,function(){u=!0}),s=void 0,e})})}var s,c=e("button/helpers/mainFrameInsurance"),l=[],d={},u=!1;return{ensureMainFrame:function(e){if(void 0===e||e&&e.wrapper instanceof Element)return i(e);throw new Error("Invalid inline options")},ensurePopout:a,get initializedMainFrame(){return s?function(){var e;return s.then(function(t){e=t}),e}():void 0},get unrecoverable(){return u},get buttonChannels(){return l},get siteInterfaces(){return d}}}),o("button/helpers/mainFrameOpener",["promise","common/console","button/frameStyler","button/buttonUtils","button/reinventTheWheel"],function(e,t,o,n,r){function i(t,i,s,c,l,d){var u=r.extend({id:s,metering:{referrer:document.referrer,href:window.location.href},options:i.spec.passive},l);return n.preferPopout(t.initializedMainFrame,i)?(a.log("Opening Clipchamp UI in popout window"),function(n){return t.ensurePopout().then(function(r){return o.decoratePopout(r),new e(function(e,o){r.channel.requestAndExpectResponse("open",n,[],function(){t.siteInterfaces[s]={success:e,failure:o,progress:c,callbacks:i.spec.active},d&&d(r)},function(e){o(e)})})})}(u)):(a.log("Opening Clipchamp UI in iframe"),function(n){return t.ensureMainFrame(i.spec.embedding.inline).then(function(r){return o.showMainFrame(r,i.spec.embedding.inline),new e(function(e,o){r.channel.requestAndExpectResponse("open",n,[],function(){t.siteInterfaces[s]={success:e,failure:o,progress:c,callbacks:i.spec.active},d&&d(r)},function(e){o(e)})})})}(u))}var a=t("button/helpers/mainFrameOpener");return{openFrame:function(e,t,o,n,r,a){if("object"==typeof e&&e&&"function"==typeof e.ensureMainFrame){if("object"==typeof t&&t&&"object"==typeof t.spec&&t.spec){if("string"==typeof o&&o){if("function"==typeof n)return i(e,t,o,n,r,a);throw new Error("Progress callback is not a function")}throw new Error("Invalid instance identifier")}throw new Error("Data store not given or not initialized")}throw new Error("Not a main frame insurance")}}}),o("button/helpers/clickOverlay",["common/console"],function(e){function t(e,t,r){var i,a=e.firstChild;return o.log("Now creating click overlay in element"),a.lastChild&&"absolute"===a.lastChild.style.position?i=a.lastChild:(i=document.createElement("div"),i.style.width="100%",i.style.height="100%",i.style.opacity=0,i.style.position="absolute",i.style.left="0px",i.style.top="0px",i.style.padding="0px",i.style.margin="0px",i.style.cursor="pointer",a.appendChild(i)),function(e){e.onmouseover=function(){t.sendMessage(n,{over:1})},e.onmouseout=function(){t.sendMessage(n,{out:1})},e.onclick=function(){t.sendMessage(n,{open:1}),r()}}(i),{progressCallback:function(e){o.log("sending overlay progress"),t.sendMessage(n,{progress:e})},successCallback:function(e){o.log("sending overlay success"),t.sendMessage(n,{success:e||1})},errorCallback:function(e){o.log("sending overlay failure"),t.sendMessage(n,{failure:e||1})}}}var o=e("button/helpers/clickOverlay"),n="overlay";return{createOverlay:function(e,o,n){if(e instanceof Element){if(e.lastChild){if("object"!=typeof o||"function"!=typeof o.sendMessage)throw new Error("Not a channel to the button");if("function"!=typeof n)throw new Error("Open callback is not a function");return t(e,o,n)}throw new Error("Parent element does not have child element")}throw new Error("Parent element is not an element")}}}),o("button/remoteController",["common/timedPromise","common/console"],function(e,t){var o=t("button/remoteController"),n=function(e){if(!(this instanceof n))return new n(e);if("object"!=typeof e||!e.channel)throw new Error("Invalid main frame: "+e);this._mainFrame=e};return n.prototype.areRecordingDevicesReady=function(){var t=this;return new e(function(e,n){t._mainFrame.channel.requestAndExpectResponse("webcam_probe",void 0,[],function(){o.log("Probing to access the webcam was successful"),e()},function(e){o.error("Probing to access the webcam failed",e),n(e)})},1e4,"while probing webcam access")},n.prototype.startRecording=function(){this._mainFrame.channel.sendMessage("recording_start",void 0,[])},n.prototype.pauseRecording=function(){this._mainFrame.channel.sendMessage("recording_pause",void 0,[])},n.prototype.resumeRecording=function(){this._mainFrame.channel.sendMessage("recording_resume",void 0,[])},n.prototype.finishRecording=function(){this._mainFrame.channel.sendMessage("recording_finish",void 0,[])},n.prototype.cancelRecording=function(){this._mainFrame.channel.sendMessage("recording_cancel",void 0,[])},n}),e(["promise","common/console","common/utils","button/buttonUtils","utils/nopromise","button/helpers/mainFrameHelper","button/reinventTheWheel","button/helpers/mainFrameInsurance","button/helpers/mainFrameOpener","button/helpers/clickOverlay","button/remoteController"],function(e,t,o,n,r,i,a,s,c,l,d){function u(t){function i(e,t){var o=a.parameters(e,t);f.promise=r.resolve(n.sanitizeApiOptions(f,void 0,o)).then(function(e){f.promise=r.resolve(e)})}function l(){var t,o;return f.promise.then(function(){c.openFrame(s,f,u,function(e){m.log("Conversion progress: "+e+"%")},{bless:1},function(e){setTimeout(function(){t&&t(new d(e))})}).catch(function(e){m.error("Error opening main frame",e),setTimeout(function(){o&&o(e)})})}),new e(function(e,n){t=e,o=n})}var u=o.createGUID("clipchamp"),f=a.getDataStore({},function(e){e.options={}});return s.ensureMainFrame(t.inline),i(t),{update:i,open:l}}function f(e,t){return s.ensureMainFrame(t.inline).then(function(r){var i;return m.log("Main frame successfully injected"),i=a.getDataStore(e,function(t){t.options={},t.promise=n.embedButtonFrame(e),t.buttonId=o.createGUID("clipchamp"),t.promise.then(function(e){if(s.buttonChannels.push(e),s.unrecoverable)return m.warn("Fatal incident, cannot continue"),void e.sendMessage("fatal");e.onRequestSendResponse("click",function(e,t,o,n){c.openFrame(s,i,i.buttonId,n).then(t,o)},!0)})}),n.sanitizeApiOptions(i,e,t).then(function(){return i.promise}).then(function(t){var o;n.preferPopout(r,i)&&(o=l.createOverlay(e,t,function(){c.openFrame(s,i,i.buttonId,o.progressCallback).then(o.successCallback,o.errorCallback)})),t.sendMessage("initialize",i.spec.passive)})})}function p(e,t){e.each(function(){f(this,t)})}function h(e,t){if(e instanceof Element)return f(e,t||{});if("object"==typeof e&&null!==e&&e.jquery&&e.each)return p(e,t||{});if(t||"object"!=typeof e&&void 0!==e)throw new Error("Invalid arguments for clipchamp(element, options)");return u(e||{})}var m=t("button/button");h.preload=function(){s.ensureMainFrame()};try{window.clipchamp=h,window.jQuery&&(window.jQuery.fn.clipchamp=function(e,t){p(this,a.parameters(e||{},t))})}catch(e){m.error("Unable to register clipchamp API functions.",e)}},void 0,!0),o("button/button",function(){})}();